# Server Configuration
PORT=5000
NODE_ENV=development

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/scan2card

# JWT Configuration
JWT_SECRET=your_jwt_secret_key_here
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_here

# Token Expiry Settings
# Access Token (used for API requests) - Default: 24h
JWT_ACCESS_TOKEN_EXPIRES_IN=24h
# Refresh Token (long-lived, used to get new access tokens) - Default: 7d
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# CORS Configuration
ALLOWED_ORIGINS=http://localhost:3000

# Vision API Configuration (for Business Card Scanning)
# MiniMax API - Primary OCR service
MINIMAX_API_KEY=your_minimax_api_key_here
# Gemini API - Fallback OCR service
GEMINI_API_KEY=your_gemini_api_key_here
# OpenAI API - Legacy support (optional, not used if MiniMax/Gemini are configured)
OPENAI_API_KEY=your_openai_api_key_here

# SMS Gateway Configuration (TextPe/SmartPing)
SMARTPING_APIKEY=your_smartping_api_key_here

# OTP Testing Configuration
# Set USE_DUMMY_OTP=true to skip actual SMS sending during development
USE_DUMMY_OTP=false
DUMMY_OTP=000000

# AWS S3 Configuration (for file uploads)
AWS_ACCESS_KEY_ID=your_aws_access_key_id_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key_here
AWS_REGION=us-east-1
AWS_S3_BUCKET_NAME=your_bucket_name_here

# Email Configuration (Nodemailer)
# For Gmail: Use your Gmail address and App Password (not regular password)
# Enable 2FA and generate App Password: https://myaccount.google.com/apppasswords
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_password_here
EMAIL_FROM=Scan2Card <noreply@scan2card.com>

# Firebase Configuration (for Push Notifications)
# Set to true to enable Firebase notifications, false to disable
FIREBASE_ENABLED=true

# Choose ONE of the following credential strategies:

# Strategy 1: File path (for local development)
FIREBASE_SERVICE_ACCOUNT_PATH=./scan2card-a484e-firebase-adminsdk-fbsvc-01e08faeed.json

# Strategy 2: Direct JSON string (for AWS App Runner / production)
# Paste the entire Firebase JSON as a single-line string
# FIREBASE_CONFIG_JSON={"type":"service_account","project_id":"...","private_key":"..."}

# Rate Limiting Configuration
# Set RATE_LIMIT_ENABLED=false to disable rate limiting (not recommended for production)
RATE_LIMIT_ENABLED=true

# Authentication Endpoints (Resource-Based Tracking)
# Registration limits
RATE_LIMIT_AUTH_REGISTER_PER_EMAIL=3
RATE_LIMIT_AUTH_REGISTER_PER_IP=500

# Login limits (failed attempts only)
RATE_LIMIT_AUTH_LOGIN_FAILED_PER_EMAIL=10
RATE_LIMIT_AUTH_LOGIN_PER_IP=1000

# OTP sending limits
RATE_LIMIT_AUTH_OTP_SEND_PER_RESOURCE=5
RATE_LIMIT_AUTH_OTP_SEND_PER_IP=500

# OTP verification limits
RATE_LIMIT_AUTH_OTP_VERIFY_PER_RESOURCE=10
RATE_LIMIT_AUTH_OTP_VERIFY_PER_IP=500

# Password reset limits
RATE_LIMIT_AUTH_PASSWORD_RESET_PER_EMAIL=3
RATE_LIMIT_AUTH_PASSWORD_RESET_PER_IP=200

# Scanning Operations (Per User)
RATE_LIMIT_SCAN_PER_USER=150
RATE_LIMIT_SCAN_WINDOW=1

# Write Operations (Per User)
RATE_LIMIT_WRITE_LEADS_PER_USER=100
RATE_LIMIT_WRITE_EVENTS_PER_USER=100
RATE_LIMIT_WRITE_MEETINGS_PER_USER=100
RATE_LIMIT_WRITE_PROFILE_PER_USER=30
RATE_LIMIT_WRITE_RSVP_PER_USER=50
RATE_LIMIT_WRITE_WINDOW=1

# File Uploads (Per User)
RATE_LIMIT_UPLOAD_PER_USER=20
RATE_LIMIT_UPLOAD_WINDOW=5

# Read Operations (Per User)
RATE_LIMIT_READ_PER_USER=200
RATE_LIMIT_READ_WINDOW=1

# Admin Operations (Per User)
RATE_LIMIT_ADMIN_PER_USER=300
RATE_LIMIT_ADMIN_DASHBOARD_PER_USER=500
RATE_LIMIT_ADMIN_WINDOW=1

# Global Catch-All (Per IP)
RATE_LIMIT_GLOBAL_PER_IP=5000
RATE_LIMIT_GLOBAL_WINDOW=15

# Browserless API Configuration (for web scraping QR code links)
# Get your API key from https://www.browserless.io/
# Uses WebSocket with Puppeteer (Option 2) - recommended by Browserless
# Works great with AWS App Runner and handles dynamic/JS-heavy pages
BROWSERLESS_API_KEY=your_browserless_api_key_here

# ============================================
# Calendar OAuth Integration
# ============================================
# These settings enable Team Managers to connect their Google Calendar or
# Microsoft Outlook calendar. When connected, meetings scheduled by Team Members
# will automatically appear on the Team Manager's calendar with video conferencing
# links (Google Meet or Microsoft Teams).

# Frontend URL (for OAuth redirects)
FRONTEND_URL=http://localhost:5173

# Google Calendar OAuth
# 1. Go to https://console.cloud.google.com/
# 2. Create a new project or select existing
# 3. Enable Google Calendar API
# 4. Go to Credentials > Create OAuth 2.0 Client ID
# 5. Add authorized redirect URI: http://localhost:5000/api/calendar/oauth/google/callback
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_REDIRECT_URI=http://localhost:5000/api/calendar/oauth/google/callback

# Microsoft Outlook OAuth (Azure AD)
# 1. Go to https://portal.azure.com/
# 2. Navigate to Azure Active Directory > App registrations
# 3. Create new registration
# 4. Add redirect URI: http://localhost:5000/api/calendar/oauth/outlook/callback
# 5. Generate a client secret under Certificates & secrets
# 6. Add API permissions: Calendars.ReadWrite, OnlineMeetings.ReadWrite, User.Read
MICROSOFT_CLIENT_ID=your_microsoft_client_id_here
MICROSOFT_CLIENT_SECRET=your_microsoft_client_secret_here
MICROSOFT_REDIRECT_URI=http://localhost:5000/api/calendar/oauth/outlook/callback
MICROSOFT_TENANT_ID=common

# Token Encryption Key
# Used to encrypt OAuth tokens at rest. Must be at least 32 characters.
# Generate a secure key: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CALENDAR_TOKEN_ENCRYPTION_KEY=your_32_character_encryption_key_here
